---
title: "JOLTS Overview"
output: 
  pdf_document:
  fig_width: 7
  fig_height: 6
  fig_caption: true
  extra_dependencies: ["amsmath", "subfig"]
fontsize: 11pt
keep_tex: true
fig_caption: true
latex_engine: pdflatex
author:
  - name: Anthony Eisenbarth
geometry: margin=1in
fontfamily: mathpazo
indent: yes
colorlinks: true

--- 
  
  ```{r include = FALSE}
library(knitr)
library(lmtest)
library(ggplot2)
library(tinytex)
library(ggthemes)
library(extrafont)
library(ggthemr)
library(tidyverse)
library(dplyr)
library(scales)
library(tidyr)
library(blscrapeR)
library(purrr)
library(lubridate)
library(zoo)
library(fredr)

```{r include = FALSE}
raspberry <- "#DB2955"
saffron <-  "#F49D37"
prussian <- "#113255"
sapphire <- "#255F85"
ggthemr('fresh')

```

  ```{r include = FALSE}
# get and wrangle data
reformat <- 
  function(df){
    pivot_wider(df, names_from = series_id, values_from = value) %>%
      rename(openings = JTSJOL, 
             hires = JTSHIL,
             separations = JTSTSL,
             quits = JTSQUL,
             layoffs = JTSLDL,
             unemployed = UNEMPLOY,
             employed = PAYEMS) %>%
      mutate(date = ymd(date)) %>%
      filter(date >= "2001-01-01") %>%
      relocate(date)
  }

df <-
  map_dfr(c( "PAYEMS", "UNEMPLOY", "JTSHIL", "JTSTSL", "JTSJOL", "JTSQUL", "JTSLDL"), fredr) %>%
  reformat()
```
#Introduction
The Job Openings and Labor Turnover Survey (JOLTS) tells us how many job openings there are each month, how many workers were hired, how many quit their job, how many were laid off, and how many experienced other separations (which includes worker deaths).

The JOLTS survey design is a stratified random sample of 20,700 nonfarm business and government 
establishments. The sample is stratified by ownership, region, industry sector, and establishment size class. The  establishments are drawn from a universe of over 9.4 million establishments compiled by the Quarterly Census of Employment and Wages (QCEW) program which includes all employers subject to state unemployment insurance laws and federal agencies subject to the Unemployment Compensation for Federal Employees program.

Employment estimates are benchmarked, or ratio adjusted, monthly to the strike-adjusted employment estimates of the Current Employment Statistics (CES) survey. A ratio of CES to JOLTS employment is used to adjust the levels for all other JOLTS data elements.

JOLTS data provide information on all pieces that go into the net change in the number of jobs. These components include hires, layoffs, voluntary quits, and other job separations (which includes retirements and worker deaths). Putting those components together reveals the overall (or net) change. JOLTS data provide information about the end of one month to the end of the next, whereas the monthly employment numbers provide information from the middle of one month to the middle of the next.


```{r include = FALSE}
plot1 <-
  df %>%
  ggplot(aes(x = date, y = unemployed/openings)) +
  geom_line(color = sapphire) + 
  theme(panel.grid.major.x = element_blank(),
        panel.grid.major.y = element_blank(),
        legend.position = "bottom",
        legend.title = element_text(size = 10),
        plot.title = element_text(size = rel(1.5), hjust = 0.5),
        plot.caption = element_text(hjust = 0.5, size = 8)) +
  scale_y_continuous(position = "right") +
  theme(text = element_text(family = "Microsoft Sans Serif", color = "black", size = 10)) + 
  labs(y = "Job Seekers Ratio \n", x = "", fill = "",
       caption = "Source: Bureau of Labor Statistics: Job Openings and Labor Turnover Survey")
```       
       
```{r include = FALSE}
plot2 <-
  df %>%
  ggplot(aes(x = date, y = unemployed/(unemployed + employed))) +
  geom_line(color = prussian) +
  geom_line(aes(y = openings/(unemployed + employed)), color = sapphire) +
  theme(panel.grid.major.x = element_blank(),
        panel.grid.major.y = element_blank(),
        legend.position = "bottom",
        legend.title = element_text(size = 10),
    plot.title = element_text(size = rel(1.5), hjust = 0.5),
    plot.caption = element_text(hjust = 1, size = 8)) +
  scale_y_continuous(label = percent_format(), position = "right") +
  theme(text = element_text(family = "Microsoft Sans Serif", color = "black", size = 10)) + 
  labs(y = "Beveridge \n", x = "", fill = "",
       caption = "Source: Bureau of Labor Statistics: Job Openings and Labor Turnover Survey")
```

```{r include = FALSE}
plot3 <-
  df %>%
  ggplot(aes(x = date, y = hires/(unemployed + employed))) +
  geom_line(color = prussian) +
  geom_line(aes(y = hires/(unemployed + employed)), color = sapphire) +
  theme(panel.grid.major.x = element_blank(),
        panel.grid.major.y = element_blank(),
        legend.position = "bottom",
        legend.title = element_text(size = 10),
        plot.title = element_text(size = rel(1.5), hjust = 0.5),
        plot.caption = element_text(hjust = 1, size = 8)) +
  scale_y_continuous(label = percent_format(), position = "right") +
  theme(text = element_text(family = "Microsoft Sans Serif", color = "black", size = 10)) + 
  labs(y = "Beveridge \n", x = "", fill = "",
       caption = "Source: Bureau of Labor Statistics: Job Openings and Labor Turnover Survey")
```


```{r, fig.width = 7.5, fig.height = 6.5}
plot1
```


```{r, fig.width = 7.5, fig.height = 6.5}
plot2
```

```{r, fig.width = 7.5, fig.height = 6.5}
plot3
```

